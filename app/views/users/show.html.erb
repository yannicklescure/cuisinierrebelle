<div class="container mt-3 mb-5">
  <div class="row justify-content-between p-3">
    <%= link_to t('.follower', count: @user.followers.count), followers_path, class: 'text-body ml-1' %>
    <% if user_signed_in? && @user == current_user %>
    <%= link_to t('.edit_user_registration'), edit_user_registration_path(@user), class: 'text-body' %>
    <% else %>
      <%= render @user %>
    <% end %>
  </div>
  <% if user_signed_in? && @user == current_user %>
  <table class="table table-sm">
    <tr>
      <th><%= t('.full_name') %></th>
      <td><%= @user.first_name.capitalize %>&nbsp;<%= @user.last_name.capitalize %></td>
    </tr>
    <tr>
      <th><%= t('.email') %></th>
      <td><%= @user.email %></td>
    </tr>
    <tr>
      <th><%= t('.created_at') %></th>
      <td><%= @user.created_at %></td>
    </tr>
    <tr>
      <th><%= t('.updated_at') %></th>
      <td><%= @user.updated_at %></td>
    </tr>
  </table>
  <% else %>
  <div id="recipes-cards" class="row py-3">
    <% @recipes.each do |recipe| %>
    <div class="col col-md-3">
      <div class="card border-0" data-recipe="<%= recipe.id %>">
        <div class="card-img-top card-img-top-<%= recipe.id %> d-flex justify-content-center align-items-center" style="background-image: url('<%= cl_image_path recipe.photo.key, height: 300, width: 400, crop: :fill %>');">
          <div class="fa-heart-<%= recipe.id %> text-danger display-3">
            <i class="fas fa-heart"></i>
          </div>
        </div>
        <!-- <img class="card-img-top" src="<%= recipe.image %>" alt="image"> -->
        <div class="card-body py-2 px-0">
          <div class="d-flex justify-content-between align-items-center">
            <% if user_signed_in? %>
              <%= link_to recipe_likes_path(recipe), method: :patch, remote: true do %>
                  <button class="btn p-0 liked liked-<%= recipe.id %> text-danger">
                    <% if recipe.likes.find_by(user: current_user).nil? %>
                      <i class="far fa-heart"></i>
                    <% else %>
                      <i class="fas fa-heart"></i>
                    <% end %>
                    &nbsp;<span class="text-muted font-weight-lighter"><%= recipe.likes.count %></span>
                  </button>
              <% end %>
              <div class="d-flex align-items-center">
                <%= link_to raw('<i class="far fa-comment-alt"></i>'), '#', class: 'btn p-0 ml-3' %>
                <%= link_to raw('<i class="fas fa-share-alt"></i>'), '#', class: 'btn p-0 ml-3' %>
                <%= link_to recipe_bookmarks_path(recipe), method: :patch, remote: true do %>
                  <button class="btn p-0 ml-3 bookmarked">
                    <% if recipe.bookmarks.find_by(user: current_user).nil?  %>
                      <i class="far fa-bookmark"></i>
                    <% else %>
                      <i class="fas fa-bookmark"></i>
                    <% end %>
                  </button>
                <% end %>
              </div>
            <% else %>
              <div class="text-danger">
                <%= link_to new_user_session_path, class: 'btn p-0 text-danger' do %>
                  <i class="far fa-heart"></i>&nbsp;<span class="text-muted font-weight-lighter"><%= recipe.likes.count %></span>
                  <% end %>
              </div>
              <div class="d-flex align-items-center">
                <%= link_to raw('<i class="far fa-comment-alt"></i>'), new_user_session_path, class: 'btn p-0 ml-3' %>
                <%= link_to raw('<i class="fas fa-share-alt"></i>'), new_user_session_path, class: 'btn p-0 ml-3' %>
                <%= link_to raw('<i class="far fa-bookmark"></i>'), new_user_session_path, class: 'btn p-0 ml-3' %>
              </div>
            <% end %>
          </div>
          <a href="<%= recipe_path(recipe) %>" class="card-link text-body text-uppercase"><%= recipe.title %></a>
          <div class="card-text font-weight-lighter"><%= recipe.description %></div>
        </div>
      </div>
    </div>
    <% end %>
  </div>
  <% end %>
</div>
