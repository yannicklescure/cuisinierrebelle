<% if user_signed_in? %>
  <div class="container my-5">
    <div class="h2 mb-3"><%= t('.published_recipes') %></div>
    <% @recipes.sort_by { |date| date.created_at }.reverse.each do |recipe| %>
    <div class="card border-0 mb-3">
      <div class="d-flex">
        <%= image_tag recipe.photo.url(:thumb), secure: true, height: 64, width: 64, class: 'rounded' %>
        <div class="ml-3 d-flex flex-column">
          <div class="small text-body d-flex flex-column">
            <div class="d-flex flex-row align-items-center">
              <div class="mr-1"><i class="far fa-calendar-check"></i></div>
              <%= recipe.created_at.strftime(t('.date_format')) %>
              <%= link_to t('.edit_recipe_html'), edit_recipe_path(recipe), class: 'text-body ml-2' %>
            </div>
          </div>
          <div class="d-flex">
            <%= link_to t(".recipe", title: recipe.title.upcase), recipe_path(recipe), class: 'text-body' %>
          </div>
          <div class="small text-body d-flex flex-column">
            <div class="d-flex align-items-center">
              <div class="mr-3 d-flex">
                <div class="mr-1"><i class="fas fa-heart"></i></div><%= recipe.likes.count %>
              </div>
              <% count = 0 %>
              <% count = recipe.comments.map { |comment| comment.replies.count }.sum %>
              <% count += recipe.comments.count %>
              <div class="mr-3 d-flex">
                <div class="mr-1"><i class="fas fa-comment-alt"></i></div><%= count %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% end %>
    </div>
  </div>
<% end %>
