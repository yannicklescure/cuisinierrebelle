{"version":3,"file":"js/38-40f07cf6cccf03545d5b.chunk.js","sources":["webpack:///./app/javascript/vue/views/Home.vue","webpack:///./app/javascript/vue/views/Home.vue?d4b8","webpack:///./app/javascript/vue/views/Home.vue?1d65","webpack:///Home.vue","webpack:///./app/javascript/vue/views/Home.vue?d1c0"],"sourcesContent":["import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=19b6b97f&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/torac/code/cuisinierrebelle/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('19b6b97f')) {\n      api.createRecord('19b6b97f', component.options)\n    } else {\n      api.reload('19b6b97f', component.options)\n    }\n    module.hot.accept(\"./Home.vue?vue&type=template&id=19b6b97f&\", function () {\n      api.rerender('19b6b97f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"app/javascript/vue/views/Home.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--6-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--6-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=template&id=19b6b97f&\"","<template>\n  <div :style=\"{ paddingTop: navbarHeight + 'px' }\">\n    <banner v-if=\"!isAuthenticated\" />\n    <div class=\"container-fluid\" ref=\"container\">\n      <div id=\"recipes-cards\">\n        <div id=\"root\" class=\"d-flex flex-wrap justify-content-start py-3\">\n          <div\n            v-for=\"(item, index) in data\"\n            :key=\"item.id\"\n            class=\"card rounded border-0\"\n          >\n            <card :item=\"item\" />\n          </div>\n        </div>\n        <div\n          v-infinite-scroll=\"loadMore\"\n          infinite-scroll-disabled=\"busy\"\n          infinite-scroll-distance=\"navbarHeight\"\n          infinite-scroll-immediate-check=\"true\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport axios from 'axios'\n// import Banner from '../components/Banner.vue'\n// import Card from '../components/Card.vue'\nconst Banner = () => import('../components/Banner.vue')\nconst Card = () => import('../components/Card.vue')\n\n\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      componentKey: 0,\n      // navbarHeight: 0,\n      data: [],\n      busy: false,\n    }\n  },\n  metaInfo: {\n    title: 'Cuisinier Rebelle',\n    // override the parent template and just use the above title only\n    titleTemplate: null\n  },\n  components: {\n    Card,\n    Banner,\n  },\n  computed: {\n    ...mapGetters(['navbarHeight', 'recipes', 'isAuthenticated']),\n    items () {\n      return this.recipes\n    },\n    // items () {\n    //   const items = this.$store.getters.recipes\n    //   // if (items && this.data.length === 0) this.data = items.slice(0, 24)\n    //   return items\n    // },\n    // setData () {\n    //   if (this.items.length > 0 && this.data.length === 0) {\n    //     this.data = this.items.slice(0, 24)\n    //     return true\n    //   }\n    //   return false\n    // },\n  },\n  // watch: {\n  //   items () {\n  //     // this.loadMore()\n  //     console.log('items loaded')\n  //   }\n  // },\n  methods: {\n    // cardParams (value) {\n    //   const cardWidth = value.params.width\n    //   console.log(cardWidth)\n    //   const containerWidth = this.$refs.container.offsetWidth\n    //   console.log(containerWidth)\n    //   console.log(containerWidth / cardWidth)\n    // },\n    loadMore () {\n      if (this.data.length < this.items.length) {\n        console.log('loadMore')\n        this.busy = true;\n        setTimeout(() => {\n          const cards = 24\n          const min = this.data.length\n          const max = min + cards <= this.items.length ? min + cards : this.items.length\n          for (let i = min, j = max; i < j; i++) {\n            this.data.push(this.items[i]);\n          }\n          this.busy = false;\n        }, 0);\n      }\n    },\n    fetchItem () {\n      if (this.recipes.length === 0) {\n        console.log('fetching recipes data')\n        this.$store\n          .dispatch('RECIPES', {})\n          .then( response => {\n            console.log(response.data.data.recipes)\n            this.data = response.data.data.recipes\n              .sort((a, b) => (a.timestamp > b.timestamp) ? 1 : -1).reverse()\n              .splice(0, 24)\n          })\n      }\n      else {\n        this.loadMore()\n      }\n    },\n  },\n  beforeMount () {\n    this.fetchItem()\n    // this.loadMore()\n  },\n  mounted () {\n    // while (this.data.length === 0){\n    //   if (this.recipes.length > 0 && this.data.length === 0) this.data = this.recipes.slice(0, 24)\n    // }\n    this.$nextTick(() => {\n      // this.navbarHeight = this.$store.getters.navbarHeight\n      // console.log(this.$store.getters.navbarHeight)\n      // console.log(this.$store.getters.recipes)\n      // if (this.items.length > 0) console.log('items ready')\n      setTimeout(() => {\n        // this.loadMore()\n        // while (!this.items && this.data.length === 0) this.loadMore()\n      }, 1000)\n      // console.log(this.data)\n    })\n  }\n}\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { style: { paddingTop: _vm.navbarHeight + \"px\" } },\n    [\n      !_vm.isAuthenticated ? _c(\"banner\") : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", { ref: \"container\", staticClass: \"container-fluid\" }, [\n        _c(\"div\", { attrs: { id: \"recipes-cards\" } }, [\n          _c(\n            \"div\",\n            {\n              staticClass: \"d-flex flex-wrap justify-content-start py-3\",\n              attrs: { id: \"root\" }\n            },\n            _vm._l(_vm.data, function(item, index) {\n              return _c(\n                \"div\",\n                { key: item.id, staticClass: \"card rounded border-0\" },\n                [_c(\"card\", { attrs: { item: item } })],\n                1\n              )\n            }),\n            0\n          ),\n          _vm._v(\" \"),\n          _c(\"div\", {\n            directives: [\n              {\n                name: \"infinite-scroll\",\n                rawName: \"v-infinite-scroll\",\n                value: _vm.loadMore,\n                expression: \"loadMore\"\n              }\n            ],\n            attrs: {\n              \"infinite-scroll-disabled\": \"busy\",\n              \"infinite-scroll-distance\": \"navbarHeight\",\n              \"infinite-scroll-immediate-check\": \"true\"\n            }\n          })\n        ])\n      ])\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0BA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAtCA;AAwCA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAtGA;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}