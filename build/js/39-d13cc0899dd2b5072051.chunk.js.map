{"version":3,"file":"js/39-d13cc0899dd2b5072051.chunk.js","sources":["webpack:///./app/javascript/vue/views/Login.vue","webpack:///./app/javascript/vue/views/Login.vue?65d3","webpack:///./app/javascript/vue/views/Login.vue?0f47","webpack:///Login.vue","webpack:///./app/javascript/vue/views/Login.vue?0733"],"sourcesContent":["import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=3b055cf9&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/torac/code/cuisinierrebelle/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3b055cf9')) {\n      api.createRecord('3b055cf9', component.options)\n    } else {\n      api.reload('3b055cf9', component.options)\n    }\n    module.hot.accept(\"./Login.vue?vue&type=template&id=3b055cf9&\", function () {\n      api.rerender('3b055cf9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"app/javascript/vue/views/Login.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--6-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--6-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=template&id=3b055cf9&\"","<template>\n  <div :style=\"{ paddingTop: navbarHeight + 'px' }\" class=\"container d-flex cr-vh100\">\n    <div class=\"d-flex flex-grow-1 justify-content-center align-items-center\">\n      <div class=\"d-flex flex-column w-md-50\">\n        <form>\n          <div class=\"form-group my-2\">\n            <label for=\"inputEmail\">{{ $t('login.email') }}</label>\n            <input v-model=\"email\" type=\"email\" class=\"form-control\" id=\"inputEmail\" aria-describedby=\"emailHelp\">\n            <small id=\"emailHelp\" class=\"form-text text-muted\">{{ $t('login.disclaimer') }}</small>\n          </div>\n          <label for=\"inputPassword\">{{ $t('signUp.password') }}</label>\n          <div class=\"input-group mb-3\">\n            <input v-model=\"password\" v-on:input=\"allowPost\" v-on:touchend=\"allowPost\" ref=\"password\" type=\"password\" class=\"form-control\" aria-describedby=\"button-password\">\n            <div class=\"input-group-append\">\n              <button v-on:click=\"showPassword\" class=\"btn btn-outline-form\" type=\"button\" id=\"button-password\">\n                <i ref=\"passwordIcon\" class=\"material-icons md-18 d-flex\">visibility_off</i>\n              </button>\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-end\">\n            <button v-on:click.stop.prevent=\"login\" type=\"submit\" class=\"btn btn-dark my-2 w-100\" :disabled=\"disabled\">{{ $t('login.submit') }}</button>\n          </div>\n        </form>\n        <div class=\"my-3\">\n          <router-link to=\"/signup\">{{ $t('login.signup') }}</router-link>\n        </div>\n      </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nconst capitalize = (s) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      disabled: true,\n      email: null,\n      password: null,\n      errors: [],\n    }\n  },\n  // components: {\n  //   // Navbar\n  // },\n  computed: {\n    ...mapGetters(['navbarHeight']),\n  },\n  methods: {\n    allowPost () {\n      if (this.email && this.password) this.disabled = false\n      else this.disabled = true\n    },\n    showPassword () {\n      if (this.$refs.password.type === \"text\") {\n        this.$refs.password.type = \"password\"\n        this.$refs.passwordIcon.innerText = \"visibility_off\"\n      }\n      else {\n        this.$refs.password.type = \"text\"\n        this.$refs.passwordIcon.innerText = \"visibility\"\n        setTimeout(() => {\n          this.showPassword()\n        }, 3000)\n      }\n    },\n    validateEmail (email) {\n      const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      return re.test(String(email).toLowerCase())\n    },\n    checkForm () {\n      this.errors = []\n      if (!this.email) {\n        this.errors.push(this.$t('signUp.errors.email'))\n        return false\n      }\n      if (!this.validateEmail(this.email)) {\n        this.errors.push(this.$t('signUp.errors.emailFormat'))\n        return false\n      }\n      if (!this.password) {\n        this.errors.push(this.$t('signUp.errors.password'))\n        return false\n      }\n      if (this.password.split('').length < 3) {\n        this.errors.push(this.$t('signUp.errors.passwordLength'))\n        return false\n      }\n      // if (this.password != this.confirmation) {\n      //   this.errors.push(this.$t('signUp.errors.confirmation'))\n      //   return false\n      // }\n      return true\n    },\n    login () {\n      const checkForm = this.checkForm()\n      if (checkForm) {\n        console.log(this.email)\n        const user = {\n          email: this.email,\n          password: this.password\n        }\n        this.$store.dispatch('LOG_IN', user)\n          .then(result => {\n            console.log(result)\n            if (result.status === 200) {\n              console.log(capitalize(result.data.first_name))\n              this.$toast.open({\n                message: this.$t('login.welcome', { firstName: capitalize(result.data.first_name) }),\n                type: 'success', // success, info, warning, error, default\n                // all of other options may go here\n                position: 'bottom', // top, bottom, top-right, bottom-right,top-left, bottom-left\n                duration: 3000, // Visibility duration in milliseconds\n                dismissible: true,\n              })\n              this.$router.push({ name: 'Home' })\n            }\n            else if (result.response) {\n              // client received an error response (5xx, 4xx)\n              this.errors.push(result.status)\n            }\n            else if (result.request) {\n              // client never received a response, or request never left\n              this.errors.push(result.status)\n            }\n            else {\n              // anything else\n              this.errors.push(result)\n            }\n          })\n          .then(() => {\n            if (this.errors.length > 0) {\n              console.log(this.errors)\n              this.$toast.open({\n                  message: this.errors[0],\n                  type: 'error', // success, info, warning, error, default\n                  // all of other options may go here\n                  position: 'bottom', // top, bottom, top-right, bottom-right,top-left, bottom-left\n                  duration: 3000, // Visibility duration in milliseconds\n                  dismissible: true,\n              })\n            }\n          })\n      }\n      else {\n        console.log(this.errors)\n        this.$toast.open({\n            message: this.errors[0],\n            type: 'error', // success, info, warning, error, default\n            // all of other options may go here\n            // position: 'bottom-right', // top, bottom, top-right, bottom-right,top-left, bottom-left\n            // duration: 3000, // Visibility duration in milliseconds\n            // dismissible: true,\n        });\n      }\n    },\n  },\n}\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"container d-flex cr-vh100\",\n      style: { paddingTop: _vm.navbarHeight + \"px\" }\n    },\n    [\n      _c(\n        \"div\",\n        {\n          staticClass:\n            \"d-flex flex-grow-1 justify-content-center align-items-center\"\n        },\n        [\n          _c(\"div\", { staticClass: \"d-flex flex-column w-md-50\" }, [\n            _c(\"form\", [\n              _c(\"div\", { staticClass: \"form-group my-2\" }, [\n                _c(\"label\", { attrs: { for: \"inputEmail\" } }, [\n                  _vm._v(_vm._s(_vm.$t(\"login.email\")))\n                ]),\n                _vm._v(\" \"),\n                _c(\"input\", {\n                  directives: [\n                    {\n                      name: \"model\",\n                      rawName: \"v-model\",\n                      value: _vm.email,\n                      expression: \"email\"\n                    }\n                  ],\n                  staticClass: \"form-control\",\n                  attrs: {\n                    type: \"email\",\n                    id: \"inputEmail\",\n                    \"aria-describedby\": \"emailHelp\"\n                  },\n                  domProps: { value: _vm.email },\n                  on: {\n                    input: function($event) {\n                      if ($event.target.composing) {\n                        return\n                      }\n                      _vm.email = $event.target.value\n                    }\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\n                  \"small\",\n                  {\n                    staticClass: \"form-text text-muted\",\n                    attrs: { id: \"emailHelp\" }\n                  },\n                  [_vm._v(_vm._s(_vm.$t(\"login.disclaimer\")))]\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"label\", { attrs: { for: \"inputPassword\" } }, [\n                _vm._v(_vm._s(_vm.$t(\"signUp.password\")))\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"input-group mb-3\" }, [\n                _c(\"input\", {\n                  directives: [\n                    {\n                      name: \"model\",\n                      rawName: \"v-model\",\n                      value: _vm.password,\n                      expression: \"password\"\n                    }\n                  ],\n                  ref: \"password\",\n                  staticClass: \"form-control\",\n                  attrs: {\n                    type: \"password\",\n                    \"aria-describedby\": \"button-password\"\n                  },\n                  domProps: { value: _vm.password },\n                  on: {\n                    input: [\n                      function($event) {\n                        if ($event.target.composing) {\n                          return\n                        }\n                        _vm.password = $event.target.value\n                      },\n                      _vm.allowPost\n                    ],\n                    touchend: _vm.allowPost\n                  }\n                }),\n                _vm._v(\" \"),\n                _c(\"div\", { staticClass: \"input-group-append\" }, [\n                  _c(\n                    \"button\",\n                    {\n                      staticClass: \"btn btn-outline-form\",\n                      attrs: { type: \"button\", id: \"button-password\" },\n                      on: { click: _vm.showPassword }\n                    },\n                    [\n                      _c(\n                        \"i\",\n                        {\n                          ref: \"passwordIcon\",\n                          staticClass: \"material-icons md-18 d-flex\"\n                        },\n                        [_vm._v(\"visibility_off\")]\n                      )\n                    ]\n                  )\n                ])\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"d-flex justify-content-end\" }, [\n                _c(\n                  \"button\",\n                  {\n                    staticClass: \"btn btn-dark my-2 w-100\",\n                    attrs: { type: \"submit\", disabled: _vm.disabled },\n                    on: {\n                      click: function($event) {\n                        $event.stopPropagation()\n                        $event.preventDefault()\n                        return _vm.login($event)\n                      }\n                    }\n                  },\n                  [_vm._v(_vm._s(_vm.$t(\"login.submit\")))]\n                )\n              ])\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"my-3\" },\n              [\n                _c(\"router-link\", { attrs: { to: \"/signup\" } }, [\n                  _vm._v(_vm._s(_vm.$t(\"login.signup\")))\n                ])\n              ],\n              1\n            )\n          ])\n        ]\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AANA;AACA;AAOA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AANA;AAQA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAQA;AACA;AA3GA;AAhBA;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}